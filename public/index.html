<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expensify - Expense Management System</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Load Phosphor Icons for a great visual aesthetic -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        :root {
            --primary: #059669; /* Emerald 600 - Deep, rich primary */
            --secondary: #1e293b; /* Slate 800 for sidebars and cards */
            --bg-dark: #0f172a; /* Slate 900 for main background */
            --text-light: #f3f4f6;
            --accent-gold: #f59e0b; /* Amber 500 for elegance/finance accent */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            min-height: 100vh;
        }
        .sidebar {
            background-color: var(--secondary);
            border-right: 1px solid #334155;
            transition: all 0.3s ease;
        }
        .nav-item {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: background-color 0.2s;
            border-radius: 0.5rem;
            margin: 0.25rem 0;
        }
        .nav-item:hover {
            background-color: #334155;
        }
        .nav-item.active {
            background-color: #334155;
            color: var(--accent-gold);
            box-shadow: inset 3px 0 0 0 var(--accent-gold);
            font-weight: 600;
        }
        .shadow-main {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.2);
        }
        .card {
            background-color: var(--secondary);
            border: 1px solid #334155;
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-2px);
        }
        .focus\:ring-primary:focus {
            --tw-ring-color: var(--accent-gold);
            border-color: var(--accent-gold);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
    </style>
</head>
<body class="flex flex-col">

    <!-- Main Application Container -->
    <div id="app" class="flex flex-col md:flex-row h-screen antialiased">
        <div id="loading-spinner" class="absolute inset-0 bg-slate-900/90 flex items-center justify-center z-50">
            <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"></div>
            <p class="text-primary ml-4 text-lg">Connecting to Backend...</p>
        </div>
        
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar hidden md:block w-full md:w-64 p-4 shadow-main z-10 flex-shrink-0">
            <div class="flex flex-col h-full">
                <div class="text-3xl font-bold text-primary mb-8 text-center tracking-wider">
                    <i class="ph-wallet text-3xl mr-1"></i> Expensify
                </div>
                
                <div id="user-selector" class="mb-4 p-3 bg-slate-700 rounded-lg shadow-inner hidden">
                    <label for="current-user-select" class="block text-xs font-semibold text-gray-400 mb-1">Active User (Simulated):</label>
                    <select id="current-user-select" class="w-full p-2 rounded-lg bg-slate-600 border-gray-500 text-white focus:ring-primary focus:border-primary"></select>
                </div>

                <div id="nav-container" class="flex-grow">
                    <!-- Navigation links will be rendered here based on role -->
                </div>
                <div id="user-info" class="mt-auto pt-4 border-t border-gray-700">
                    <p class="text-sm font-semibold">Role: <span id="user-role-display"></span></p>
                    <p class="text-xs text-gray-400 truncate">ID: <span id="user-id-display"></span></p>
                    <button onclick="window.signOutApp()" class="mt-2 w-full py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-semibold rounded-lg transition duration-150 shadow-md">
                        Sign Out
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main id="main-content" class="flex-grow p-4 md:p-8 overflow-y-auto">
            <!-- Content will be dynamically inserted here -->
        </main>
        
        <!-- Custom Modal Container -->
        <div id="modal-container" class="fixed inset-0 bg-black bg-opacity-70 z-50 hidden items-center justify-center">
            <div id="custom-modal" class="bg-slate-800 p-6 rounded-xl shadow-2xl w-full max-w-md mx-4 transform transition-all duration-300 scale-95 opacity-0">
                <h3 id="modal-title" class="text-xl font-bold mb-4 text-primary"></h3>
                <p id="modal-message" class="text-gray-300 mb-6"></p>
                <div id="modal-actions" class="flex justify-end space-x-3">
                    <!-- Buttons go here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Link to Frontend Logic -->
    <script type="module" src="app.js"></script>
</body>
</html>
